/*!
 * SDNU Online Judge
 * https://github.com/sdnuacmicpc/sdnuoj
 *
 * Copyright 2012-2015 SDNU ACM-ICPC TEAM
 * Licensed under the MIT license
 */
var SDNUOJ=SDNUOJ||{},_hmt;SDNUOJ.namespace=function(n){var t=n.split("."),r=SDNUOJ,i;for(t[0]==="SDNUOJ"&&(t=t.slice(1)),i=0;i<t.length;i+=1)typeof r[t[i]]=="undefined"&&(r[t[i]]={}),r=r[t[i]];return r};SDNUOJ.PM={SOURCEVIEW:2,ADMINISTRATOR:128,NEWSMANAGE:256,RESOURCEMANAGE:512,FORUMMANAGE:1024,PROBLEMMANAGE:2048,CONTESTMANAGE:4096,SOLUTIONMANAGE:8192,SUPERADMINISTRATOR:1073741822};SDNUOJ.namespace("SDNUOJ.util.cookies");SDNUOJ.util.cookies=function(){return{set:function(n,t,i,r,u){var f=n+"="+escape(t),e;i>0&&(e=new Date,e.setTime(e.getTime()+i*1e3),f+=";expires="+e.toGMTString());r!=null&&(f+=";path="+r);u&&(f+=";secure");document.cookie=f},get:function(n){for(var i,r=document.cookie.split("; "),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return unescape(i[1]);return""},remove:function(n){document.cookie=n+"=;expires="+new Date(0).toGMTString()}}}();SDNUOJ.namespace("SDNUOJ.util.storage");SDNUOJ.util.storage=function(){var n=SDNUOJ.util.cookies;return{set:function(t,i,r){var u=(new Date).getTime();window.sessionStorage?(window.sessionStorage[t]=i,window.sessionStorage[t+"_timeset"]=u,window.sessionStorage[t+"_timeout"]=r):n.set(t,i,r,"/",!0)},get:function(t){var e=(new Date).getTime(),r,f,u,i;return window.sessionStorage?(r=window.sessionStorage[t+"_timeset"],u=window.sessionStorage[t+"_timeout"],i=window.sessionStorage[t],(r==null||u==null)&&(i=null),i!=null&&r!=null&&u!=null&&(f=(e-r)/1e3,f>u&&(i=null))):i=n.get(t),i!=""?i:null},clear:function(){window.sessionStorage&&window.sessionStorage.clear()}}}();SDNUOJ.namespace("SDNUOJ.util.date");SDNUOJ.util.date=function(){var n=["日","一","二","三","四","五","六"],t=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];return{format:function(i,r){if(i){r||(r="yyyy-MM-dd HH:mm:ss");switch(typeof i){case"string":i=new Date(i.replace(/-/g,"/"));break;case"number":i=new Date(i)}if(!(!i instanceof Date)){var u={yyyy:i.getFullYear(),M:i.getMonth()+1,d:i.getDate(),H:i.getHours(),m:i.getMinutes(),s:i.getSeconds(),MM:(""+(i.getMonth()+101)).substr(1),dd:(""+(i.getDate()+100)).substr(1),HH:(""+(i.getHours()+100)).substr(1),mm:(""+(i.getMinutes()+100)).substr(1),ss:(""+(i.getSeconds()+100)).substr(1),ddd:n[i.getDay()],dddd:t[i.getDay()]};return r.replace(/(yyyy|MM?|d{1,4}|HH?|ss?|mm?)/g,function(){return u[arguments[0]]})}}}}}();SDNUOJ.namespace("SDNUOJ.util.form");SDNUOJ.util.form=function(){function n(n){for(var t,r=n.find("input,textarea"),i=0;i<r.length;i++)if(t=$(r[i]),!t.is(":hidden")||t.is("textarea[data-editor='true']")){if(t.attr("data-emptyinfo")&&t.val()=="")return alert(t.attr("data-emptyinfo")),!1;if(t.attr("data-comparedto")&&t.attr("data-notequalinfo")&&t.val()!=$("#"+t.attr("data-comparedto")).val())return alert(t.attr("data-notequalinfo")),!1;if(t.attr("data-regex")&&t.attr("data-invalidinfo")&&!new RegExp(t.attr("data-regex")).test(t.val()))return alert(t.attr("data-invalidinfo")),!1}return!0}function t(n,t){var i=t||window.event,r=i.keyCode||i.which||i.charCode;i.ctrlKey&&r==13&&n.parents("form").trigger("submit")}return{verifyForm:n,setFormAutoVerify:function(){$("form[data-verify='true']").submit(function(){return n($(this))})},quickSubmit:t,setTextboxQuickSubmit:function(){$("input[data-quicksubmit='true'],textarea[data-quicksubmit='true']").keydown(function(n){return t($(this),n)})}}}();SDNUOJ.namespace("SDNUOJ.util.dom");SDNUOJ.util.dom=function(){return{getCheckboxValue:function(n){for(var i="",r=0,t=0;t<n.length;t++)n[t].checked&&(r>0&&(i+=","),i+=$(n[t]).val(),r++);return r>0?i:null},getRadioValue:function(n){for(var t=0;t<n.length;t++)if(n[t].checked)return $(n[t]).val();return null},getValue:function(n){var t=$("input[name='"+n+"'],select[name='"+n+"'],textarea[name='"+n+"']");return t.length<=0?null:t.is("input[type='checkbox']")?this.getCheckboxValue(t):t.is("input[type='radio']")?this.getRadioValue(t):t.val()}}}();SDNUOJ.namespace("SDNUOJ.util.file");SDNUOJ.util.file=function(){return{getFileExtension:function(n){return n.substring(n.lastIndexOf(".")).toLowerCase()}}}();SDNUOJ.namespace("SDNUOJ.util.list");SDNUOJ.util.list=function(){function n(n){for(var i=$("input[name='"+n.attr("data-selectall-name")+"']"),t=0;t<i.length;t++)i[t].checked=n[0].checked}return{selectAll:n,setCheckboxSelectAll:function(){$("input[data-selectall-name]").change(function(){return n($(this))})}}}();SDNUOJ.namespace("SDNUOJ.util.loader");SDNUOJ.util.loader=function(){return{load:function(n){for(var u=typeof n=="string"?[n]:n,t=0;t<u.length;t++){var f=u[t],e=f.split("."),s=e[e.length-1].toLowerCase(),i=s=="css",r=i?"link":"script",h=i?' type="text/css" rel="stylesheet" ':' language="javascript" type="text/javascript" ',o=(i?"href":"src")+'="'+f+'"';$(r+"["+o+"]").length==0&&document.write("<"+r+h+o+"><\/"+r+">")}}}}();SDNUOJ.namespace("SDNUOJ.util.browser");SDNUOJ.util.browser=function(){return{ltIE8:function(){var i=navigator.appName,r=navigator.appVersion,n=r.split(";"),t=n&&n.length>1?n[1].replace(/[ ]/g,""):"";return i=="Microsoft Internet Explorer"&&(t=="MSIE6.0"||t=="MSIE7.0")?!0:!1}}}();SDNUOJ.namespace("SDNUOJ.user");SDNUOJ.user=function(){function i(n){return(l&n)==n}var t=SDNUOJ.util.cookies,r=SDNUOJ.util.storage,u="_oj_",e=u+"bs",o=u+"la",s=u+"sl",h=t.get(e),n=h!=""?h.split("|"):null,c=n!=null?n[0]:"",l=n!=null?n[1]:"",f=n!=null?n[2]:"",a;return f==""&&(f="0"),a=function(){var n=!1;return c==""?t.remove(e):n=!0,n||r.clear(),n}(),{getIsLogined:function(){return a},getCurrentUserName:function(){return c},getCurrentPermission:function(){return l},getUnreadMail:function(){return f},getLastLanguage:function(){var n=t.get(o);return!n||n==""?0:parseInt(n)},setLastLanguage:function(n){t.set(o,n,31536e3,"/")},hasPermission:function(n){return i(n)},hasSourceViewPermission:function(){return i(SDNUOJ.PM.SOURCEVIEW)},hasAdministratorPermission:function(){return i(SDNUOJ.PM.ADMINISTRATOR)},hasContestManagePermission:function(){return i(SDNUOJ.PM.CONTESTMANAGE)},getSubmitList:function(n){var t=r.get(s);if(t!=null){n($.parseJSON(t));return}$.getJSON("/solution/submitlist").done(function(t){r.set(s,JSON.stringify(t),30);n(t)})}}}();
/*! http://mths.be/placeholder v2.0.8 by @mathias */
(function(n,t,i){function y(n){var t={},r=/^jQuery\d+$/;return i.each(n.attributes,function(n,i){i.specified&&!r.test(i.name)&&(t[i.name]=i.value)}),t}function e(n,t){var u=this,r=i(u);if(u.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),n===!0)return r[0].value=t;r.focus()}else u.value="",r.removeClass("placeholder"),u==v()&&u.select()}function s(){var t,r=this,n=i(r),u=this.id;if(r.value==""){if(r.type=="password"){if(!n.data("placeholder-textinput")){try{t=n.clone().attr({type:"text"})}catch(f){t=i("<input>").attr(i.extend(y(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":n,"placeholder-id":u}).bind("focus.placeholder",e);n.data({"placeholder-textinput":t,"placeholder-id":u}).before(t)}n=n.removeAttr("id").hide().prev().attr("id",u).show()}n.addClass("placeholder");n[0].value=n.attr("placeholder")}else n.removeClass("placeholder")}function v(){try{return t.activeElement}catch(n){}}var h=Object.prototype.toString.call(n.operamini)=="[object OperaMini]",f="placeholder"in t.createElement("input")&&!h,o="placeholder"in t.createElement("textarea")&&!h,c=i.fn,l=i.valHooks,a=i.propHooks,u,r;f&&o?(r=c.placeholder=function(){return this},r.input=r.textarea=!0):(r=c.placeholder=function(){var n=this;return n.filter((f?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":s}).data("placeholder-enabled",!0).trigger("blur.placeholder"),n},r.input=f,r.textarea=o,u={get:function(n){var t=i(n),r=t.data("placeholder-password");return r?r[0].value:t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":n.value},set:function(n,t){var r=i(n),u=r.data("placeholder-password");return u?u[0].value=t:r.data("placeholder-enabled")?(t==""?(n.value=t,n!=v()&&s.call(n)):r.hasClass("placeholder")?e.call(n,!0,t)||(n.value=t):n.value=t,r):n.value=t}},f||(l.input=u,a.value=u),o||(l.textarea=u,a.value=u),i(function(){i(t).delegate("form","submit.placeholder",function(){var n=i(".placeholder",this).each(e);setTimeout(function(){n.each(s)},10)})}),i(n).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))})(this,document,jQuery);SDNUOJ.namespace("SDNUOJ.page.foreground");SDNUOJ.page.foreground=function(){function r(){var t=window.location.protocol+"//"+window.location.host,n;return window.location.host.indexOf(":")||window.location.port==80||(t+=":"+window.location.port),t.charAt(t.length-1)!="/"&&(t+="/"),n=window.location.href.replace(t,""),n.indexOf("?")>-1&&(n=n.substring(0,n.indexOf("?"))),n}function u(){return $("#contest-submenus").length>0}function s(n){if("undefined"!=typeof n){var t=n.init;"undefined"!=typeof t&&t()}}var t=SDNUOJ.user,f=r(),i,n,e,o;return u()||($("#navbar > .navbar-nav li a[href$='"+f+"']").parent().addClass("active"),$("#navbar > .navbar-nav > .dropdown > .dropdown-menu li a[href$='"+f+"']").parent().parent().parent().addClass("active")),t.getIsLogined()&&(i=t.getCurrentUserName(),n=t.getUnreadMail(),n>0?($("#btn-user").html(i+(n>0?'&nbsp;<span class="badge badge-danger">'+n+"<\/span>":"")).click(function(){self.location="/mail/box"}),$("#user-mail").html("Mail Box"+(n>0?'&nbsp;<span class="badge badge-danger">'+n+"<\/span>":""))):$("#btn-user").click(function(){self.location="/user/info/"+i}),t.hasAdministratorPermission()&&(e=$("<li>").append($("<a>").attr({href:"/admin",target:"_blank"}).html("Administration")),o=$("<li>").addClass("divider"),e.insertBefore($("#user-logout").parent()),o.insertBefore($("#user-logout").parent()))),{is:function(n){var t=$("#main-container").attr("data-type");return n==t},initPage:function(){var r=$("#main-container").attr("data-type"),i,t,u,n;if(r!="")for(i=r.split("."),n=SDNUOJ.pages,t=0;t<i.length;t++)u=i[t],n=n[u],s(n)},getPagePath:r,getIsContestPage:u}}();SDNUOJ.namespace("SDNUOJ.page.highlight");SDNUOJ.page.highlight=function(){function i(n){return r[n]}function t(t,r,u,f,e){if("undefined"!=typeof t&&t){config={lineNumbers:!0,styleActiveLine:!e,matchBrackets:!e,autofocus:!e&&!f,indentUnit:4,mode:i(u),extraKeys:{F11:function(n){n.setOption("fullScreen",!n.getOption("fullScreen"));n.getOption("fullScreen")?$("nav").hide():$("nav").show()},Esc:function(n){n.getOption("fullScreen")&&n.setOption("fullScreen",!1);n.getOption("fullScreen")||$("nav").show()}}};f&&(config.viewportMargin=Infinity,config.readOnly=!0,config.cursorBlinkRate=-1);var o=t.fromTextArea(r[0],config);n.push(o)}}var r=["text/x-csrc","text/x-c++src","text/x-java"],n=[];return{addHighlightor:t,setAllHighlightEditors:function(){if($("textarea[data-codeeditor='true']").length>0){var n=SDNUOJ.user,i=n.getLastLanguage();$("textarea[data-codeeditor='true']").each(function(){var n=$(this);t(CodeMirror,n,i,!1,!1)})}},setAllHighlightViewers:function(){$("textarea[data-codeview='true']").length>0&&$("textarea[data-codeview='true']").each(function(){var n=$(this),i=n.attr("data-language"),r=n.attr("data-simpleview")=="true";t(CodeMirror,n,i,!0,r)})},getAll:function(){return n},clearAllText:function(){for(var t=0;t<n.length;t++)n[t].setValue("")},setAllLanguage:function(t){for(var r=0;r<n.length;r++)n[r].setOption("mode",i(t))}}}();SDNUOJ.namespace("SDNUOJ.page.tree");SDNUOJ.page.tree=function(){function n(n){n.hasClass("tree-item-expand")?(n.removeClass("tree-item-expand"),n.addClass("tree-item-collapse"),$("#"+n.attr("data-collapse-target")).show()):n.hasClass("tree-item-collapse")&&(n.removeClass("tree-item-collapse"),n.addClass("tree-item-expand"),$("#"+n.attr("data-collapse-target")).hide())}return{collapseList:n,setImageCollapse:function(){$("a[data-collapse='true']").attr("href","javascript:void(0);").click(function(){return n($(this))})}}}();SDNUOJ.namespace("SDNUOJ.page.foreground.contest");SDNUOJ.page.foreground.contest=function(){var n=SDNUOJ.user;return{initPage:function(){var t,i,r;$("#contest-submenus").length>0&&(n.hasContestManagePermission()&&(t=$("#contest-submenus").attr("data-contestid"),i=$("<li>").append($("<a>").attr("href","/contest/"+t+"/overall/statistics").html("Statistics")),$("#contest-submenus").append(i)),r=SDNUOJ.page.foreground.getPagePath(),$("#contest-submenus li a[href$='"+r+"']").parent().addClass("active"))}}}();SDNUOJ.namespace("SDNUOJ.pages.contest.index");SDNUOJ.pages.contest.index=function(){function n(){var n=new Date((new Date).getTime()+TIME_DIFF);$("#server-time").html(SDNUOJ.util.date.format(n,"yyyy-MM-dd HH:mm:ss"));setTimeout("SDNUOJ.pages.contest.index.serverClockTick()",1e3)}return{init:function(){$("#server-time").length>0&&n()},serverClockTick:n}}();SDNUOJ.namespace("SDNUOJ.pages.contest.statistics");SDNUOJ.pages.contest.statistics=function(){function n(){var n=$("#table-contest-statistics")[0],h=$("#contest-submenus").attr("data-contestid"),c=0,i=c+1,y=n.rows[i].textContent?n.rows[i].textContent:n.rows[i].innerText,e,o,t,r,s,u,f,l;if(!(n.rows.length<=2)||!(y.indexOf("No")>-1))for(e=n.insertRow(n.rows.length),o=e.insertCell(0),o.style.textAlign="center",o.innerHTML='<strong><a href="/contest/'+h+'/status/list">Total<\/a><\/strong>',t=1;t<n.rows[i].cells.length;t++){for(r=e.insertCell(t),s=0,r.align="center",u=i;u<n.rows.length-1;u++)f=n.rows[u].cells[t],l=f.textContent?f.textContent:f.innerText,s+=parseInt(l);var a=n.rows[c].cells[t],p=n.rows[i].cells[t],v=$(p).find("span").attr("class");r.innerHTML='<a href="/contest/'+h+"/status/list"+(a.id!=""?"?"+a.id:"")+'"><span'+(v!=null?' class="'+v+'"':"")+">"+s+"<\/span><\/a>";r.style.textAlign="center"}}return{init:function(){$("#table-contest-statistics").length>0&&n()}}}();SDNUOJ.namespace("SDNUOJ.pages.problems");SDNUOJ.pages.problems=function(){function t(n,t){var i=$("#S"+n);i.length>0&&(i.addClass(t==2?"problem-ac":t==1?"problem-wa":"problem-normal"),i.html(t==2?"Y":t==1?"N":""))}var n=SDNUOJ.user;return{init:function(){n.getIsLogined()&&$("#SOpen").length>0&&n.getSubmitList(function(n){var r=n.solved,u=n.unsolved,i;if(u)for(i=0;i<u.length;i++)t(u[i],1);if(r)for(i=0;i<r.length;i++)t(r[i],2)})}}}();SDNUOJ.namespace("SDNUOJ.pages.recent");SDNUOJ.pages.recent=function(){return{init:function(){$("#table-recent").length>0&&$.getJSON("/contests/recentinfo").done(function(n){var t;for($("#tr-recent-info").remove(),t=n.length-1;t>=0;t--){n[t].access==""&&(n[t].access="Public");var i=$("<td>").addClass("text-center").html(t+1e3),r=$("<td>").html('<a href="'+n[t].link+'" target="_blank">'+n[t].name+"<\/a>"),u=$("<td>").addClass("text-center").html(n[t].start_time),f=$("<td>").addClass("text-center").html('<span class="label contest_'+n[t].access+'">'+n[t].access+"<\/span>"),e=$("<td>").addClass("text-center").html(n[t].oj),o=$("<tr>").append(i).append(r).append(u).append(f).append(e);$("#table-recent").append(o)}}).fail(function(){$("td-recent-info").html("No such contest")})}}}();SDNUOJ.namespace("SDNUOJ.pages.status");SDNUOJ.pages.status=function(){var n=SDNUOJ.user;return{init:function(){if(n.getIsLogined()){function t(t,i,r){return n.hasSourceViewPermission()||n.getCurrentUserName()==i?'<a href="/solution/view/'+t+'">'+r+"<\/a>":r}$(".status-language").each(function(n){var r=$(this).attr("id"),i;r.indexOf("lang_default_")==0?(i=r.split("_"),$(this).html(t(i[2],i[3],$(this).html(),!1)),$(this).attr("id","lang_"+n)):r.indexOf("lang_contest_")==0&&(i=r.split("_"),$(this).html(t(i[2],i[3],$(this).html(),!0)),$(this).attr("id","lang_"+n))})}}}}();SDNUOJ.namespace("SDNUOJ.pages.userinfo");SDNUOJ.pages.userinfo=function(){var n=SDNUOJ.user;return{init:function(){if(n.getIsLogined()){var i=n.getCurrentUserName().toLowerCase(),t=$("#downloadcode_"+i);t.length>0&&t.html('(<a href="/solution/sourcecodes">Download<\/a>)')}}}}();SDNUOJ.namespace("SDNUOJ.pages.mailbox");SDNUOJ.pages.mailbox=function(){var n=SDNUOJ.user;return{init:function(){$("#form-mailbox-delete").submit(function(){return $(this).serialize().indexOf("mailid")<0?(alert("Please select at least one mail!"),!1):window.confirm("Are you sure you want to delete selected mail(s)?")?!0:!1});$("button[data-loading-text]").click(function(){$(this).button("loading")})}}}();SDNUOJ.namespace("SDNUOJ.pages.mail");SDNUOJ.pages.mail=function(){var n=SDNUOJ.user;return{init:function(){$("#form-mail-delete").submit(function(){return window.confirm("Are you sure you want to delete this mail?")?!0:!1});$("button[data-loading-text]").click(function(){$(this).button("loading")})}}}();SDNUOJ.namespace("SDNUOJ.pages.submitcode");SDNUOJ.pages.submitcode=function(){var n=SDNUOJ.user,t=SDNUOJ.page.highlight;return{init:function(){for(var r=n.getLastLanguage(),u=!1,f=$("#lang").children("option"),i=0;i<f.length;i++)if(f[i].value==r){u=!0;break}u&&$("#lang").val(r);$("#lang").change(function(){var i=$("#lang").val();n.setLastLanguage(i);t.setAllLanguage(i)});$("button[type='reset']").click(function(){t.clearAllText("")})}}}(),function(){SDNUOJ.util.browser.ltIE8()&&$("#browser-warning").show();$("[placeholder]").placeholder();$(".img-checkcode").trigger("click");SDNUOJ.util.form.setFormAutoVerify();SDNUOJ.util.form.setTextboxQuickSubmit();SDNUOJ.util.list.setCheckboxSelectAll();SDNUOJ.page.highlight.setAllHighlightEditors();SDNUOJ.page.highlight.setAllHighlightViewers();SDNUOJ.page.tree.setImageCollapse();SDNUOJ.page.foreground.initPage();SDNUOJ.page.foreground.contest.initPage()}();_hmt=_hmt||[],function(){var i=$("#main-container").attr("data-tjid"),n,t;i!=""&&(n=document.createElement("script"),n.src="//hm.baidu.com/hm.js?"+i,t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(n,t))}();